<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EduHub - AI Tutor</title>
    <link rel="stylesheet" href="{{url_for('static', path='styles.css')}}">
  </head>
  <body>
    <div class="header">
      <div class="header-content">
        <div class="brand">
          CodeHive
          <img src="test4.png" alt="CodeHive" width="40" height="35" />
        </div>
        <div
          class="tab"
          style="
            display: flex;
            flex: 1;
            justify-content: center;
            align-items: center;
          "
        >
          <span style="margin: 0 40px">
            <a href="/student/quizzes" class="btn btn-tabs" style="font-size: 16px"
              >Quiz</a
            >
          </span>
          <span style="margin: 0 40px">
            <a
              href="/student/discussions"
              class="btn btn-tabs"
              style="font-size: 16px"
              >Discussion</a
            >
          </span>
          <span style="margin: 0 40px">
            <a
              href="/student/courses"
              class="btn btn-tabs"
              style="font-size: 16px"
              >Courses</a
            >
          </span>
        </div>
        <a href="homePage.html" class="loginandout" style="font-size: 16px"
          >Logout</a
        >
      </div>
    </div>

    <div class="container">
      <div class="content">
        <a href="/student/courses" class="btn btn-secondary back-btn"
          >‚Üê Back to Courses</a
        >
        <h2 class="section-title" id="chatCourseName">AI Tutor</h2>
        <div class="chat-container">
          <div class="chat-header">Ask me anything about your course!</div>
          <div class="chat-messages" id="chatMessages">
            <div class="message message-ai">
              Hello! I'm your AI tutor. How can I help you with your studies
              today?
            </div>
          </div>
          <div class="chat-input-area">
            <input
              type="text"
              class="chat-input"
              id="chatInput"
              placeholder="Type your question..."
            />
            <button class="btn btn-primary" onclick="sendMessage()">
              Send
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Get course name from URL
      const urlParams = new URLSearchParams(window.location.search);
      const courseName = urlParams.get("course") || "Course";
      document.getElementById(
        "chatCourseName"
      ).textContent = `${courseName} - AI Tutor`;

      function sendMessage() {
        const input = document.getElementById("chatInput");
        const message = input.value.trim();
        if (message) {
          const messagesDiv = document.getElementById("chatMessages");

          const userMessage = document.createElement("div");
          userMessage.className = "message message-user";
          userMessage.textContent = message;
          messagesDiv.appendChild(userMessage);

          input.value = "";
          messagesDiv.scrollTop = messagesDiv.scrollHeight;

          // Simulate AI response
          setTimeout(() => {
            const aiMessage = document.createElement("div");
            aiMessage.className = "message message-ai";
            aiMessage.textContent = `Great question about ${courseName}! Let me help you understand that concept better. This is a simulated response - in a real application, this would connect to an AI service to provide detailed explanations tailored to your question.`;
            messagesDiv.appendChild(aiMessage);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
          }, 1000);
        }
      }

      // Send message on Enter key
      document
        .getElementById("chatInput")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            sendMessage();
          }
        });
    </script>
  </body>
</html>
